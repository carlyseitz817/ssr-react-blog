{"version":3,"file":"static/webpack/static/development/pages/callback.js.4648385489219f776086.hot-update.js","sources":["webpack:///./components/shared/Header.js","webpack:///./pages/callback.js","webpack:///./services/auth0.js"],"sourcesContent":["import React from 'react';\nimport Link from 'next/link';\nimport ActiveLink from '../ActiveLink';\nimport {\n    Collapse,\n    Navbar,\n    NavbarToggler,\n    NavbarBrand,\n    Nav,\n    NavItem,\n    NavLink,\n    Dropdown,\n    DropdownItem,\n    DropdownToggle,\n    DropdownMenu\n} from 'reactstrap';\n\nimport auth0 from '../../services/auth0';\n\nconst BsNavLink = (props) => {\n    const { route, title } = props;\n    const className = props.className || \"\";\n\n    return (\n        <ActiveLink activeClassName=\"active\" route={route}>\n            <a className={`nav-link port-navbar-link ${className}`}> {title} </a>\n        </ActiveLink>\n    )\n}\n\nconst Login = () => {\n    return (\n        <span onClick={auth0.login} className=\"nav-link port-navbar-link clickable\"> Login </span>\n    )\n}\n\nconst Logout = () => {\n    return (\n        <span onClick={auth0.logout} className=\"nav-link port-navbar-link clickable\"> Logout </span>\n    )\n}\n\nexport default class Header extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isOpen: false,\n            dropdownOpen: false\n        };\n\n        this.toggle = this.toggle.bind(this);\n        this.toggleDropdown = this.toggleDropdown.bind(this);\n    }\n\n    toggle() {\n        this.setState({\n            isOpen: !this.state.isOpen\n        });\n    }\n\n    toggleDropdown() {\n        this.setState({\n            dropdownOpen: !this.state.dropdownOpen\n        });\n    }\n\n    renderBlogMenu() {\n        const { isSiteOwner } = this.props;\n        const { user } = this.props;\n\n        if (user) {\n            return (\n                <Dropdown className=\"port-navbar-link port-dropdown-menu\" nav isOpen={this.state.dropdownOpen} toggle={this.toggleDropdown}>\n                    <DropdownToggle className=\"port-dropdown-toggle\" nav caret>\n                        Blog\n          </DropdownToggle>\n                    <DropdownMenu>\n                        <DropdownItem>\n                            <BsNavLink className=\"port-dropdown-item\"\n                                route=\"/blogs\"\n                                title=\"Blogs\" />\n                        </DropdownItem>\n                        <DropdownItem>\n                            <BsNavLink className=\"port-dropdown-item\"\n                                route=\"/blogs/new\"\n                                title=\"Create a Blog\" />\n                        </DropdownItem>\n                        <DropdownItem>\n                            <BsNavLink className=\"port-dropdown-item\"\n                                route=\"/blogs/dashboard\"\n                                title=\"Blogs Dashboard\" />\n                        </DropdownItem>\n                    </DropdownMenu>\n                </Dropdown>\n            )\n        }\n\n        return (\n            <NavItem className=\"port-navbar-item\">\n                <BsNavLink route=\"/blogs\" title=\"Blog\" />\n            </NavItem>\n        )\n    }\n\n    render() {\n        const { isAuthenticated, user, className } = this.props;\n        const { isOpen } = this.state;\n\n        const menuOpenClass = isOpen ? 'menu-open' : 'menu-close';\n\n        return (\n            <div>\n                <Navbar className=\"port-navbar port-default absolute\" color=\"transparent\" dark expand=\"md\">\n                    <NavbarBrand className=\"port-navbar-brand\" href=\"/\">SSR Next.js Blog</NavbarBrand>\n                    <NavbarToggler onClick={this.toggle} />\n                    <Collapse isOpen={this.state.isOpen} navbar>\n                        <Nav className=\"ml-auto\" navbar>\n                            <NavItem className=\"port-navbar-item\">\n                                <BsNavLink route=\"/about\" title=\"ABOUT\" />\n                            </NavItem>\n                            <NavItem className=\"port-navbar-item\">\n                                <BsNavLink route=\"/blog\" title=\"BLOG\" />\n                            </NavItem>\n\n                            {\n                                !isAuthenticated &&\n\n                                <NavItem className=\"port-navbar-item\">\n                                    <Login />\n                                </NavItem>\n                            }\n\n                            {\n                                isAuthenticated &&\n\n                                <NavItem className=\"port-navbar-item\">\n                                    <Logout />\n                                </NavItem>\n                            }\n\n                            {/* <UncontrolledDropdown nav inNavbar>\n                            <DropdownToggle nav caret>\n                                Options\n            </DropdownToggle>\n                            <DropdownMenu right>\n                                <DropdownItem>\n                                    Option 1\n              </DropdownItem>\n                                <DropdownItem>\n                                    Option 2\n              </DropdownItem>\n                                <DropdownItem divider />\n                                <DropdownItem>\n                                    Reset\n              </DropdownItem>\n                            </DropdownMenu>\n                        </UncontrolledDropdown> */}\n                        </Nav>\n                    </Collapse>\n                </Navbar>\n            </div>\n        );\n    }\n}\n\n\n\n\n\n\n// import React from 'react';\n// import Link from 'next/link';\n// import {\n//     Collapse,\n//     Navbar,\n//     NavbarToggler,\n//     NavbarBrand,\n//     Nav,\n//     NavItem,\n//     NavLink,\n//     UncontrolledDropdown,\n//     DropdownToggle,\n//     DropdownMenu,\n//     DropdownItem\n// } from 'reactstrap';\n\n// import auth0 from '../../services/auth0';\n\n// const BsNavLink = (props) => {\n//     const { route, title } = props;\n\n//     return (\n//         <Link href={route}>\n//             <a className=\"nav-link port-navbar-link\">{title}</a>\n//         </Link>\n//     );\n// };\n\n// const Login = () => {\n//     return (\n//         <span onClick={auth0.login} className=\"nav-link port-navbar-link\">Login</span>\n//     )\n// }\n\n// const Logout = () => {\n//     return (\n//         <span onClick={auth0.logout} className=\"nav-link port-navbar-link\">Logout</span>\n//     )\n// }\n\n// export default class Example extends React.Component {\n//     constructor(props) {\n//         super(props);\n\n//         this.toggle = this.toggle.bind(this);\n//         this.state = {\n//             isOpen: false\n//         };\n//     }\n//     toggle() {\n//         this.setState({\n//             isOpen: !this.state.isOpen\n//         });\n//     }\n//     render() {\n//         const { isAuthenticated, user, className } = this.props;\n//         const { isOpen } = this.state;\n\n//         const menuOpenClass = isOpen ? 'menu-open' : 'menu-close';\n\n\n//         return (\n//             <div>\n//                 <Navbar className=\"port-navbar port-default absolute\" color=\"transparent\" dark expand=\"md\">\n//                     <NavbarBrand className=\"port-navbar-brand\" href=\"/\">SSR Next.js Blog</NavbarBrand>\n//                     <NavbarToggler onClick={this.toggle} />\n//                     <Collapse isOpen={this.state.isOpen} navbar>\n//                         <Nav className=\"ml-auto\" navbar>\n//                             <NavItem className=\"port-navbar-item\">\n//                                 <BsNavLink route=\"/about\" title=\"ABOUT\" />\n//                             </NavItem>\n//                             <NavItem className=\"port-navbar-item\">\n//                                 <BsNavLink route=\"/blog\" title=\"BLOG\" />\n//                             </NavItem>\n\n//                             {\n//                                 !auth0.isAuthenticated() &&\n\n//                                 <NavItem className=\"port-navbar-item\">\n//                                     <Login />\n//                                 </NavItem>\n//                             }\n\n//                             {\n//                                 auth0.isAuthenticated() &&\n\n//                                 <NavItem className=\"port-navbar-item\">\n//                                     <Logout />\n//                                 </NavItem>\n//                             }\n\n//                             {/* <UncontrolledDropdown nav inNavbar>\n//                                 <DropdownToggle nav caret>\n//                                     Options\n//                 </DropdownToggle>\n//                                 <DropdownMenu right>\n//                                     <DropdownItem>\n//                                         Option 1\n//                   </DropdownItem>\n//                                     <DropdownItem>\n//                                         Option 2\n//                   </DropdownItem>\n//                                     <DropdownItem divider />\n//                                     <DropdownItem>\n//                                         Reset\n//                   </DropdownItem>\n//                                 </DropdownMenu>\n//                             </UncontrolledDropdown> */}\n//                         </Nav>\n//                     </Collapse>\n//                 </Navbar>\n//             </div>\n//         );\n//     }\n// }\n\n","import React from 'react';\nimport BaseLayout from '../components/layouts/BaseLayout';\nimport axios from 'axios';\nimport Link from 'next/link';\nimport { withRouter } from 'next/router';\nimport { Container, Row, Col } from 'reactstrap';\nimport BasePage from '../components/BasePage';\nimport moment from 'moment';\n\nimport auth0client from '../services/auth0'\n\n\n\nclass Callback extends React.Component {\n\n    async componentDidMount() {\n        auth0client.handleAuthentication();\n        this.props.router.push('/');\n    \n    }\n\n\n    static async getInitialProps() {\n        console.log(\"getInitialProps\");\n\n        let posts = [];\n\n        try {\n            const response = await axios.get(\"https://jsonplaceholder.typicode.com/posts\");\n            posts = response.data;\n        } catch (err) {\n            console.log(err);\n        }\n\n        return { posts: posts.splice(0, 10) };\n    }\n\n    renderPosts(posts) {\n        return posts.map((post) => {\n            return (\n                <li key={post.id}>\n                    <Link href={`/post?title=${post.title}`} as={`/blog/${post.title}`.replace(/ /g, \"-\")}>\n                        <a> KEY: {post.id}{post.title} </a>\n                    </Link>\n                </li>\n            )\n        })\n    };\n\n    render() {\n        // debugger;\n        const { posts } = this.props;\n        // console.log(this.props);\n        return (\n            <BaseLayout {...this.props.auth}>\n                <BasePage>\n                    <h1>Logging in...</h1>\n                    <ul>\n                        \n                    </ul>\n                </BasePage>\n            </BaseLayout>\n        )\n    }\n}\n\n\nexport default withRouter(Callback);","// //auth0 goes here\n// import auth0 from 'auth0-js';\n// import Cookies from 'js-cookie';\n// import jwt from 'jsonwebtoken';\n\n// class Auth {\n//     constructor() {\n//         this.auth0 = new auth0.WebAuth(\n//             {\n//                 domain: 'dev-x6yltt2s.auth0.com',\n//                 clientID: 'lEopvK1CVu4NTl5j5EnvgWCOlSKnMRsZ',\n//                 redirectUri: 'http://localhost:3000/callback',\n//                 responseType: 'token id_token',\n//                 scope: 'openid profile',\n//             });\n\n//         this.login = this.login.bind(this);\n//         this.logout = this.logout.bind(this);\n//         this.handleAuthentication = this.handleAuthentication.bind(this);\n//         this.isAuthenticated = this.isAuthenticated.bind(this);\n\n//     };\n\n//     handleAuthentication() {\n//         return new Promise((resolve, reject) => {\n//             this.auth0.parseHash((err, authResult) => {\n//                 if (authResult && authResult.accessToken && authResult.idToken) {\n//                     this.setSession(authResult);\n//                     resolve();\n//                 }\n//                 else if (err) {\n\n//                     reject(err);\n\n//                     // history.replace('/home');\n\n//                     console.log(err);\n\n//                     alert('Whoops! Something went wrong! Error: ${err.error}. Check the console for further details.');\n//                 }\n//             });\n//         })\n//     }\n\n//     setSession(authResult) {\n\n//         localStorage.setItem('isLoggedIn', 'true');\n\n//         const expiresAt = (authResult.expiresIn * 1000) + new Date().getTime();\n\n//         Cookies.set('user', authResult.idTokenPayload);\n//         Cookies.set('jwt', authResult.idToken);\n//         Cookies.set('expiresAt', expiresAt);\n\n//         console.log('You are now logged in!')\n//     }\n\n//     logout() {\n//         Cookies.remove('user');\n//         Cookies.remove('jwt');\n//         Cookies.remove('expiresAt');\n\n//         this.auth0.logout({\n//             returnTo: '',\n//             clientID: 'lEopvK1CVu4NTl5j5EnvgWCOlSKnMRsZ'\n//         })\n\n//         console.log('Leaving so soon? :(')\n//     }\n\n//     login() {\n//         this.auth0.authorize()\n//     }\n\n//     isAuthenticated() {\n//         const expiresAt = Cookies.getJSON('expiresAt');\n//         return new Date().getTime() < expiresAt;\n//     }\n\n//     verifyToken(token) {\n//         if (token) {\n//             const decodedToken = jwt.decode(token);\n//             const expiresAt = decodedToken.exp = 1000;\n\n//             return (decodedToken && new Date().getTime() < expiresAt) ? decodedToken : undefined;\n//         }\n\n//         return undefined;\n//     }\n\n//     clientAuth() {\n//         var token = Cookies.getJSON(\"jwt\");\n//         const verifiedToken = this.verifyToken(token);\n\n//         return token;\n//         // return this.isAuthenticated();\n//     }\n\n//     serverAuth(req) {\n//         if (req.headers.cookie) {\n//                         const expiresAtCookie = req.headers.cookie.split(\";\").find(c => c.trim().startsWith(\"expiresAt=\"));\n\n//             // const expiresAtCookie = req.headers.cookie.split(\";\").find(c => c.trim().startsWith(\"expiresAt=\"));\n//             // const cookies = req.headers.cookie;\n//             // console.log(cookies);\n//             // const splitedCookies = cookies.split(\";\");\n//             // console.log(splitedCookies);\n//             // const expiresAtCookie = splitedCookies.find(c => c.trim().startsWith(\"expiresAt=\"));\n//             // const expiresAtArray = expiresAtCookie.split(\"=\");\n//             // console.log(expiresAtArray);\n//             // const expiresAt = expiresAtArray[1];\n//             // console.log(expiresAt);\n\n\n//             if (!expiresAtCookie) {\n//                 return undefined\n//             }\n\n//             const expiresAt = expiresAtCookie.split(\"=\")[1];\n\n//             return new Date().getTime() < expiresAt;\n//         }\n//     }\n// }\n\n// const auth0client = new Auth();\n\n// export default auth0client;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAcA;AACA;AACA;AAAA;AAAA;AAEA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AAEA;AACA;AACA;AAFA;AAKA;AACA;AATA;AAUA;AACA;;;AACA;AACA;AACA;AADA;AAGA;;;AAEA;AACA;AACA;AADA;AAGA;;;AAEA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAFA;AAKA;AACA;AACA;AAFA;AAKA;AACA;AACA;AAFA;AAOA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAGA;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAMA;AAAA;AAQA;AAAA;AA2BA;;;;AAzHA;AAkIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AACA;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAKA;AACA;;;AAEA;AACA;AADA;AACA;AAGA;AAUA;;;;;;;;;;;;AAxCA;AAEA;;;AAGA;AACA;;AADA;AACA;;;;;;;AAEA;AACA;;AAEA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAtBA;AACA;AAqDA;;;;;;;;;;;ACnEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAEA;;;;;;;;;;;;;;;;A","sourceRoot":""}