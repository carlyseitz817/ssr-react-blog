{"version":3,"file":"static/webpack/static/development/pages/_app.js.4648385489219f776086.hot-update.js","sources":["webpack:///./pages/_app.js","webpack:///./services/auth0.js"],"sourcesContent":["import React from 'react';\nimport App, { Container } from 'next/app';\n\nimport auth0 from '../services/auth0';\n\n// Stylings\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport '../styles/main.scss';\n\nclass MyApp extends App {\n    static async getInitialProps({ Component, router, ctx }) {\n        let pageProps = {}\n        \n        // const isAuthenticated = process.browser ? auth0.clientAuth() : auth0.serverAuth(ctx.req);\n        const user = process.browser ? await auth0.clientAuth() : await auth0.serverAuth(ctx.req);\n\n        if (Component.getInitialProps) {\n            pageProps = await Component.getInitialProps(ctx)\n        }\n\n        const auth = { user, isAuthenticated: !!user };\n\n        return { pageProps, auth };\n\n    }\n\n    render() {\n        const { Component, pageProps, auth } = this.props;\n\n        return (\n            <Container>\n                <Component {...pageProps} auth={auth} />\n            </Container>\n        )\n    }\n}\n\nexport default MyApp\n\n","// //auth0 goes here\n// import auth0 from 'auth0-js';\n// import Cookies from 'js-cookie';\n// import jwt from 'jsonwebtoken';\n\n// class Auth {\n//     constructor() {\n//         this.auth0 = new auth0.WebAuth(\n//             {\n//                 domain: 'dev-x6yltt2s.auth0.com',\n//                 clientID: 'lEopvK1CVu4NTl5j5EnvgWCOlSKnMRsZ',\n//                 redirectUri: 'http://localhost:3000/callback',\n//                 responseType: 'token id_token',\n//                 scope: 'openid profile',\n//             });\n\n//         this.login = this.login.bind(this);\n//         this.logout = this.logout.bind(this);\n//         this.handleAuthentication = this.handleAuthentication.bind(this);\n//         this.isAuthenticated = this.isAuthenticated.bind(this);\n\n//     };\n\n//     handleAuthentication() {\n//         return new Promise((resolve, reject) => {\n//             this.auth0.parseHash((err, authResult) => {\n//                 if (authResult && authResult.accessToken && authResult.idToken) {\n//                     this.setSession(authResult);\n//                     resolve();\n//                 }\n//                 else if (err) {\n\n//                     reject(err);\n\n//                     // history.replace('/home');\n\n//                     console.log(err);\n\n//                     alert('Whoops! Something went wrong! Error: ${err.error}. Check the console for further details.');\n//                 }\n//             });\n//         })\n//     }\n\n//     setSession(authResult) {\n\n//         localStorage.setItem('isLoggedIn', 'true');\n\n//         const expiresAt = (authResult.expiresIn * 1000) + new Date().getTime();\n\n//         Cookies.set('user', authResult.idTokenPayload);\n//         Cookies.set('jwt', authResult.idToken);\n//         Cookies.set('expiresAt', expiresAt);\n\n//         console.log('You are now logged in!')\n//     }\n\n//     logout() {\n//         Cookies.remove('user');\n//         Cookies.remove('jwt');\n//         Cookies.remove('expiresAt');\n\n//         this.auth0.logout({\n//             returnTo: '',\n//             clientID: 'lEopvK1CVu4NTl5j5EnvgWCOlSKnMRsZ'\n//         })\n\n//         console.log('Leaving so soon? :(')\n//     }\n\n//     login() {\n//         this.auth0.authorize()\n//     }\n\n//     isAuthenticated() {\n//         const expiresAt = Cookies.getJSON('expiresAt');\n//         return new Date().getTime() < expiresAt;\n//     }\n\n//     verifyToken(token) {\n//         if (token) {\n//             const decodedToken = jwt.decode(token);\n//             const expiresAt = decodedToken.exp = 1000;\n\n//             return (decodedToken && new Date().getTime() < expiresAt) ? decodedToken : undefined;\n//         }\n\n//         return undefined;\n//     }\n\n//     clientAuth() {\n//         var token = Cookies.getJSON(\"jwt\");\n//         const verifiedToken = this.verifyToken(token);\n\n//         return token;\n//         // return this.isAuthenticated();\n//     }\n\n//     serverAuth(req) {\n//         if (req.headers.cookie) {\n//                         const expiresAtCookie = req.headers.cookie.split(\";\").find(c => c.trim().startsWith(\"expiresAt=\"));\n\n//             // const expiresAtCookie = req.headers.cookie.split(\";\").find(c => c.trim().startsWith(\"expiresAt=\"));\n//             // const cookies = req.headers.cookie;\n//             // console.log(cookies);\n//             // const splitedCookies = cookies.split(\";\");\n//             // console.log(splitedCookies);\n//             // const expiresAtCookie = splitedCookies.find(c => c.trim().startsWith(\"expiresAt=\"));\n//             // const expiresAtArray = expiresAtCookie.split(\"=\");\n//             // console.log(expiresAtArray);\n//             // const expiresAt = expiresAtArray[1];\n//             // console.log(expiresAt);\n\n\n//             if (!expiresAtCookie) {\n//                 return undefined\n//             }\n\n//             const expiresAt = expiresAtCookie.split(\"=\")[1];\n\n//             return new Date().getTime() < expiresAt;\n//         }\n//     }\n// }\n\n// const auth0client = new Auth();\n\n// export default auth0client;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;AAiBA;AAAA;AAAA;AAAA;AAAA;AAGA;AAEA;AAAA;AAGA;;;;;;;;;;;;AAxBA;AACA;AACA;AAEA;;;AAAA;AACA;;;;;;;;AADA;AACA;;;;;AADA;AACA;AACA;;;;;;AACA;AACA;;AADA;AACA;;AAEA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAdA;AACA;AA2BA;;;;;;;;;;;ACrCA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAEA;;;;;;;;;;;;;;;;A","sourceRoot":""}