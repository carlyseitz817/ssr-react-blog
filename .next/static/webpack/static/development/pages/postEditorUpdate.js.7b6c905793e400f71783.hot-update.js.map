{"version":3,"file":"static/webpack/static/development/pages/postEditorUpdate.js.7b6c905793e400f71783.hot-update.js","sources":["webpack:///./actions/index.js"],"sourcesContent":["import axios from 'axios';\nimport Cookies from 'js-cookie';\n\nimport { getCookieFromReq } from '../helpers/utils';\n\nconst axiosInstance = axios.create({\n  baseURL: `http://localhost:3000/api/v1`,\n\n  timeout: 3000\n});\n\n\nconst setAuthHeader = (req) => {\n  const token = req ? getCookieFromReq(req, 'jwt') : Cookies.getJSON('jwt');\n\n  if (token) {\n    return { headers: { 'authorization': `Bearer ${token}` } };\n  }\n\n  return undefined;\n}\n\nconst rejectPromise = (resError) => {\n  let error = {};\n\n  if (resError && resError.response && resError.response.data) {\n    error = resError.response.data;\n  } else {\n    error = resError;\n  }\n\n  return Promise.reject(error);\n}\n\n\nexport const getSecretData = async (req) => {\n  const url = '/secret';\n\n  return await axiosInstance.get(url, setAuthHeader(req)).then(response => response.data);\n}\n\n// ------------ BLOG ACTIONS --------------\n\nexport const getPosts = async (req) => {\n  return await axiosInstance.get('/api/v1/blog').then(response => response.data);\n}\n\nexport const getPostBySlug = async (slug) => {\n  return await axiosInstance.get(`/blog/s/${slug}`).then(response => response.data);\n}\n\nexport const getUserPosts = async (req) => {\n  return await axiosInstance.get('/blog/me', setAuthHeader(req)).then(response => response.data);\n}\n\nexport const createPost = (postData) => {\n  return axiosInstance.post('/blog', postData, setAuthHeader())\n    .then(response => response.data)\n    .catch(err => rejectPromise(err))\n}\n\nexport const updatePost = (postData, postId) => {\n  return axiosInstance.patch(`/blog/${postId}`, postData, setAuthHeader())\n    .then(response => response.data)\n    .catch(err => rejectPromise(err))\n}\n\nexport const publishPost = (postData, postId) => {\n  return axiosInstance.patch(`/blog/${postId}`, postData, setAuthHeader())\n    .then(response => response.data)\n    .catch(err => rejectPromise(err))\n}\n\nexport const getPostById = (postId) => {\n  return axiosInstance.get(`/blog/${postId}`).then(response => response.data);\n}\n\nexport const deletePost = (postId) => {\n  return axiosInstance.delete(`/blog/${postId}`, setAuthHeader())\n    .then(response => response.data)\n    .catch(err => rejectPromise(err));\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AAEA;AACA;AAEA;AAHA;AACA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAGA;AAAA;AACA;AAJA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAFA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAFA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAFA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;;;;A","sourceRoot":""}